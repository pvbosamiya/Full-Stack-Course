(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(13),u=n.n(l),c=n(2),o=function(e){var t=e.message,n=e.errorMessage;if(null===t&&null===n)return null;var a=n,l="error";return null===n&&(a=t,l="update"),r.a.createElement("div",{className:l},a)},i=function(e){var t=e.defaultSearch,n=e.changeHandler,a=e.message,l=e.errorMessage;return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(o,{message:a,errorMessage:l}),r.a.createElement("form",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement("input",{value:t,onChange:n})))))))},m=function(e){var t=e.person,n=e.deleteHandler;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n(t)},"delete")))},s=function(e){var t=e.persons,n=e.handler;return 0===t.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(m,{key:e.name,person:e,deleteHandler:n})})))))},d=n(3),f=n.n(d),E="/api/persons",p=function(){return f.a.get(E).then((function(e){return e.data}))},g=function(e){return f.a.post(E,e).then((function(e){return e.data}))},b=function(e){return f.a.delete("".concat(E,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return f.a.put("".concat(E,"/").concat(e),t).then((function(e){return e.data}))},v=(n(36),function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(""),o=Object(c.a)(u,2),m=o[0],d=o[1],f=Object(a.useState)(""),E=Object(c.a)(f,2),v=E[0],j=E[1],O=Object(a.useState)(""),y=Object(c.a)(O,2),S=y[0],k=y[1],w=Object(a.useState)(!1),C=Object(c.a)(w,2),T=C[0],D=C[1],F=Object(a.useState)(null),H=Object(c.a)(F,2),M=H[0],N=H[1],x=Object(a.useState)(null),I=Object(c.a)(x,2),A=I[0],J=I[1],L=T?n.filter((function(e){return!!e.name.toLowerCase().includes(S.toLowerCase())})):n,P=function(e){return e.name===m};Object(a.useEffect)((function(){console.log("Fetching ..."),p().then((function(e){return l(e)}))}),[m]);return console.log("Rendering ...",n),r.a.createElement("div",null,r.a.createElement(i,{changeHandler:function(e){console.log(e.target.value),k(e.target.value),D(!0)},defaultSearch:S,message:M,errorMessage:A}),r.a.createElement("h2",null,"Add"),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),0!==m.length&&0!==v.length){var t=n.findIndex(P);if(console.log("Found ",m," at index ",t),-1!==t)if(n[t].number!==v){if(!0===window.confirm(m+" is part of the Phonebook, Do you want to update the phone number?")){var a={name:m,number:v};h(n[t].id,a).then((function(e){N("Updated '".concat(e.name,"'")),setTimeout((function(){return N(null)}),5e3)})).catch((function(e){console.log(e);var t=e.response.status,n=e.response.data;400===t&&"Duplicate Entry"!==n&&(J("Error: '".concat(n,"' during update of '").concat(m," ").concat(v,"', skipping update ...")),setTimeout((function(){return J(null)}),1e4))}))}}else N("No new data '".concat(m," ").concat(v,"', skipping update ...")),setTimeout((function(){return N(null)}),5e3);else g({name:m,number:v}).then((function(e){l(n.concat(e)),N("Added '".concat(e.name,"'")),setTimeout((function(){return N(null)}),5e3)})).catch((function(e){var t=e.response.status,n=e.response.data.error;400===t&&"Duplicate Entry"!==n&&(J("Error: '".concat(n,"' during creation of entry: '").concat(m,", ").concat(v,"'.")),setTimeout((function(){return J(null)}),1e4))}));d(""),j("")}}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name:"),r.a.createElement("td",null,r.a.createElement("input",{value:m,onChange:function(e){console.log(e.target.value),d(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"number:"),r.a.createElement("td",null,r.a.createElement("input",{value:v,onChange:function(e){console.log(e.target.value),j(e.target.value)}}))))),r.a.createElement("button",{type:"submit"},"add")),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{persons:L,handler:function(e){return function(){b(e.id).catch((function(t){J("Information of ".concat(e.name," has already been removed from server.")),setTimeout((function(){return J(null)}),5e3)})),l(n.filter((function(t){return t.id!==e.id})))}}}))});u.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.55951bf2.chunk.js.map