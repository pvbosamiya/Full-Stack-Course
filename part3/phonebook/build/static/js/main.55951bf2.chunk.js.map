{"version":3,"sources":["components/notification.js","components/filter.js","components/persons.js","services/persons.js","components/app.js","index.js"],"names":["Notification","message","errorMessage","displayMessage","cssTag","className","Filter","props","search","defaultSearch","handleSearch","changeHandler","value","onChange","Person","person","deleteHandler","name","number","onClick","Persons","persons","handler","length","map","key","baseURL","axios","get","then","response","data","newObject","post","id","delete","put","App","useState","setPersons","newName","setnewName","newNumber","setNewNumber","setSearch","useSearch","setUseSearch","popUpMessage","setPopUpMessage","setErrorMessage","personsToShow","filter","toLowerCase","includes","checkPresence","useEffect","console","log","personService","initialData","event","target","onSubmit","preventDefault","searchIndex","findIndex","window","confirm","newPerson","updatedPerson","setTimeout","catch","error","status","error_message","newPersonR","concat","type","validPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.55951bf2.chunk.js","sourcesContent":["import React from 'react'\n\nconst Notification = ({ message, errorMessage }) => {\n  if (message === null && errorMessage === null) {\n    return null\n  }\n\n  let displayMessage = errorMessage\n  let cssTag = \"error\"\n  if (errorMessage === null)\n  {\n      displayMessage = message\n      cssTag = \"update\"\n  }\n\n  return (\n      <div className={cssTag}>\n          {displayMessage}\n      </div>\n  )\n\n}\n\nexport default Notification","import React from 'react'\nimport Notification from \"./notification\";\n\nconst Filter = (props) => {\n\n    const search = props.defaultSearch\n    const handleSearch = props.changeHandler\n    const message = props.message\n    const errorMessage = props.errorMessage\n\n    return (\n        <div>\n            <h1>Phonebook</h1>\n            <Notification message={message} errorMessage={errorMessage}/>\n            <form>\n            <table>\n                <tbody>\n                    <tr>\n                        <td>Name:</td>\n                        <td><input value={search}\n                             onChange={handleSearch}/></td>\n                    </tr>\n                </tbody>\n            </table>\n            </form>\n        </div>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst Person = ({ person , deleteHandler}) => {\n  return (\n    <tr>\n      <td>{person.name}</td> \n      <td>{person.number}</td>\n      <td>\n        <button onClick={deleteHandler(person)}>delete</button>\n      </td>\n    </tr>\n  )\n}\n\nconst Persons = ({persons, handler}) => {\n  if(persons.length === 0)\n  {\n    return <></>\n  }\n\n  return (\n  <>\n  <table>\n      <tbody>    \n      {persons.map((person) => \n          <Person key={person.name} person={person} deleteHandler={handler}/>\n          )}\n      </tbody>\n  </table>\n  </>\n  )\n}\n\nexport default Persons","import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nconst get = () => {\n    const request = axios.get(baseURL)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseURL, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseURL}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseURL}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default {get, create, remove, update}","import React, {useState, useEffect} from 'react'\nimport Filter from './filter'\nimport Persons from './persons'\nimport personService from '../services/persons'\nimport '../index.css'\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setnewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n\n    const [search, setSearch] = useState('')\n    const [useSearch, setUseSearch] = useState(false)\n    const [popUpMessage, setPopUpMessage] = useState(null)\n    const [errorMessage, setErrorMessage] = useState(null)\n\n    const findPersonFunc = (person) => {\n        let name = (person.name).toLowerCase()\n        if (name.includes(search.toLowerCase()))\n        {\n            return true\n        }\n\n        return false\n    }\n\n    const personsToShow = useSearch ? persons.filter(findPersonFunc) : persons\n\n    const hook = () => {\n        console.log(\"Fetching ...\")\n        personService.get().then(initialData => setPersons(initialData))\n    }\n\n    const checkPresence = (person) => person.name === newName\n\n    const deleteHandler = (person) => {\n        const handler = () => {\n            personService.remove(person.id).catch(error => {\n                setErrorMessage(`Information of ${person.name} has already been removed from server.`)\n                setTimeout(() => setErrorMessage(null), 5000)\n            })\n            setPersons(persons.filter(validPerson => validPerson.id !== person.id))\n        }\n\n        return handler\n    }\n\n    useEffect(hook, [newName])\n\n    const handleSearch = (event) => {\n        console.log(event.target.value)\n        setSearch(event.target.value)\n        setUseSearch(true)\n    }\n\n    const addnewPerson = (event) => {\n        event.preventDefault()\n        if (newName.length !== 0 && newNumber.length !== 0)\n        {\n            let searchIndex = persons.findIndex(checkPresence)\n            console.log(\"Found \", newName, \" at index \", searchIndex)\n            if (searchIndex !== -1)\n            {\n                if(persons[searchIndex].number !== newNumber)\n                {\n                    const update = window.confirm(newName + \n                        ' is part of the Phonebook, Do you want to update the phone number?')\n                    if(update === true)\n                    {\n                        const newPerson = {\n                            name: newName,\n                            number: newNumber\n                        }\n                        personService.update(persons[searchIndex].id, newPerson).then(updatedPerson =>\n                            {\n                                setPopUpMessage(`Updated '${updatedPerson.name}'`)\n                                setTimeout(() => setPopUpMessage(null), 5000)\n                            })\n                            .catch(error => {\n                                console.log(error)\n                                let status = error.response.status\n                                let error_message = error.response.data\n                                if (status === 400 && error_message !== 'Duplicate Entry')\n                                {\n                                    setErrorMessage(`Error: '${error_message}' during update of '${newName} ${newNumber}', skipping update ...`)\n                                    setTimeout(() => setErrorMessage(null), 10000)\n                                }\n                            })\n                    }\n                }\n                else\n                {\n                    setPopUpMessage(`No new data '${newName} ${newNumber}', skipping update ...`)\n                    setTimeout(() => setPopUpMessage(null), 5000)\n                }\n            }\n            else\n            {\n                const newPerson = { \n                    name: newName,\n                    number: newNumber\n                }\n\n                personService.create(newPerson).then(newPersonR =>\n                    {\n                        setPersons(persons.concat(newPersonR))\n                        setPopUpMessage(`Added '${newPersonR.name}'`)\n                        setTimeout(() => setPopUpMessage(null), 5000)\n                    })\n                    .catch(error => {\n                        let status = error.response.status\n                        let error_message = error.response.data.error\n                        if (status === 400 && error_message !== 'Duplicate Entry')\n                        {\n                            setErrorMessage(`Error: '${error_message}' during creation of entry: '${newName}, ${newNumber}'.`)\n                            setTimeout(() => setErrorMessage(null), 10000)\n                        }\n                    })\n            }\n\n            setnewName('')\n            setNewNumber('')\n        }\n    }\n\n    const handlenewName = (event) => {\n        console.log(event.target.value)\n        setnewName(event.target.value)\n    }\n\n    const handlenewNumber = (event) => {\n        console.log(event.target.value)\n        setNewNumber(event.target.value)\n    }\n\n    console.log(\"Rendering ...\", persons)\n    return (\n    <div>\n        <Filter changeHandler={handleSearch} defaultSearch={search} message={popUpMessage} errorMessage={errorMessage}/>\n        <h2>Add</h2>\n        <form onSubmit={addnewPerson}>\n        <table>\n            <tbody>\n                <tr>\n                    <td>name:</td>\n                    <td><input value={newName}\n                         onChange={handlenewName}/></td>\n                </tr>\n                <tr>\n                    <td>number:</td>\n                    <td><input value={newNumber}\n                         onChange={handlenewNumber}/></td>\n                </tr> \n            </tbody>\n        </table>\n        <button type=\"submit\">add</button>\n        </form>\n        <h2>Numbers</h2>\n        <Persons persons={personsToShow} handler={deleteHandler}/>\n    </div>\n    )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/app'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}